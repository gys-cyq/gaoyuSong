<!DOCTYPE html>
<html lang="en">
<head>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<title>崇川科技局项目管理系统</title>
		<link rel="stylesheet" href="static/css/font.css"  />
		<link rel="stylesheet" href="lib/layui/css/layui.css" />
		<link rel="stylesheet" href="css/style.css"  />
		<script type="text/javascript" src="js/main.js"></script>
	</head>
<body>
<div class="layui-tab-brief">
	<fieldset class="layui-elem-field">
		<div class="layui-field-box">
			<table class="style-table" id="patentList" lay-filter="patentList">
			</table>
		</div>
	</fieldset>
</div>
<script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="js/jquery.form.js"></script>
<script type="text/javascript" src="lib/layui/layui.js"></script>
<script type="text/javascript">
    token = localStorage.getItem("token");
    layui.use(['layer','table','form','upload'],function() {
        var layer = layui.layer,
            table = layui.table,
            form = layui.form,
            upload = layui.upload;


        table.render({
            elem: '#patentList',
            url: baseUrl + '/announcement/findOnHomePage',
            where: {token: token},
            parseData: function (res) {
                return {
                    "code": 0,
                    "msg": res.msg,
                    "count": res.data.total,
                    "data": res.data.list,
                }
            },
            id: 'infrastId',
            page: true, //开启分页
            cols: [[ //表头
                {field: 'title', title: '标题',width:120,},
                {field: 'type', title: '类型',width:80,templet:function(obj){
                    if(obj.type==1){
                        return "公告";
                    }else if(obj.type==2){
                        return "通知";
                    }
                }},
                {field: 'content', title: '内容'},
                {field: 'author', title: '作者',width:100,},
                {field: 'isAll', title: '是否通知全员',width:100,templet:function(obj){
                    if(obj.isAll==1){
                        return "通知全员";
                    }else if(obj.isAll==2){
                        return "非全员";
                    }
                }},
                {field: 'attList', title: '通知人信息',width:350,templet:function(d){
                    var obj = d.attList;
                    if(obj!=null){
                        var data = '';
                        for(var i=0;i<obj.length;i++){
                            if(data==''){
                                data=obj[i].nickName;
                            }else{
                                data = data+','+obj[i].nickName;
                            }
                        }
                        return data;
					}else{
                        return "所有用户";
					}
                }},
            ]],
            done: function (res, cuur, count) {
                layer.closeAll('loading');
            }
        });

    })

</script>
</body>
</html>